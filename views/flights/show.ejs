<%- include('../partials/header') %>

<div class="card" style="width: 18rem;">
    <div class="input-group-text" style="width: 17.4rem;">Airline: <%= flight.airline %></div>
    <div class="input-group-text" style="width: 17.4rem;">Fight Number: <%= flight.flightNumber %></div>
    <div class="input-group-text" style="width: 17.4rem;">Departure Date: <%= flight.departs.toDateString() %></div>
    <div class="input-group-text" style="width: 17.4rem;">Departure Time: <%= flight.departs.toLocaleTimeString() %></div>
</div>
 
<div class="card" style="width: 18rem;">
  <form action="/flights/<%= flight._id %>/departures" method="POST" class="mb-0 p-2">
    
<label class="input-group-text">Destination:</label>
<select class="custom-select" name="airport">
  <option value="AUS">AUS</option>
  <option value="DAL">DAL</option>
  <option value="LAX">LAX</option>
  <option value="SAN">SAN</option>
  <option value="SEA">SEA</option>
</select>

<label class="input-group-text">Date:</label>
  <% let date = Date.now()  %>
  <input class="input-group-text bg-white"  style="width: 16.9rem;" type="datetime-local"  name="departs" default="<%= date.toLocaleString %>">
  <div class="text-center">
    <button class = "btn btn-success m-1" type="submit" value="Update Flight">Submit
    </button>
  </div>
  </form>
</div>

<div class="card" style="width: 18rem;">

  <table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th>Airport</th>
        <th>Arrival</th>
      </tr>
    </thead>
    <tbody>
      <% flight.destinations.forEach(function(r) { %>
        <tr>
          <td><%= r.airport %></td>
          <td><%= r.arrival %></td>
        </tr>
      <% }); %>
    </tbody>
  </table>
  <button>
    <a href="<%= flight._id %>/tickets/new">Add a Ticket</a>
  </button>
</div>

<div class="card" style="width: 18rem;">
  <table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th>Seat</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody>
      <% tickets.forEach(function(ticket) { %>
        <tr>
          <td><%= ticket.seat %></td>
          <td><%= ticket.price %></td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>
  <%- include('../partials/footer') %>