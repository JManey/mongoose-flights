<%- include('../partials/header') %>

<div class="container text-center">
  <div class="row ">
    <div class="col-sm">
      <div class="card m-2" style="width: 18rem;">
          <h4 class="card-header text-center">
              Details:
            </h4>
        <div class="input-group-text">Airline: <%= flight.airline %></div>
        <div class="input-group-text">Fight Number: <%= flight.flightNumber %></div>
        <div class="input-group-text">Departure Date: <%= flight.departs.toDateString() %></div>
        <div class="input-group-text">Departure Time: <%= flight.departs.toLocaleTimeString() %></div>
      </div>
    </div>

<div class="col-sm">  
<div class="card m-2" style="width: 18rem;">
    <h4 class="card-header text-center">
       Input Destination Details
      </h4>
  <form action="/flights/<%= flight._id %>/departures" method="POST" class="mb-0 p-2">
    
<label class="input-group-text">Destination:</label>
<select class="custom-select" name="airport">
  <option value="AUS">AUS</option>
  <option value="DAL">DAL</option>
  <option value="LAX">LAX</option>
  <option value="SAN">SAN</option>
  <option value="SEA">SEA</option>
</select>

<label class="input-group-text">Date:</label>
  <% let date = Date.now()  %>
  <input class="input-group-text bg-white"  style="width: 16.9rem;" type="datetime-local"  name="departs" default="<%= date.toLocaleString %>">
  <div class="text-center">
    <button class = "btn btn-success m-1" type="submit" value="Update Flight">Submit
    </button>
  </div>
  </form>
</div>
</div>

<div class="col-sm"></div>
<div class="card m-2" style="width: 18rem;">
  <h4 class="card-header text-center">
    Destinations:
  </h4>
  <table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th>Airport</th>
        <th>Arrival</th>
      </tr>
    </thead>
    <tbody>
      <% flight.destinations.forEach(function(r) { %>
        <tr>
          <td><%= r.airport %></td>
          <td><%= r.arrival %></td>
        </tr>
      <% }); %>
    </tbody>
  </table>

</div>
</div>

<div class="card m-2" style="width: 18rem;">
  <h4 class="card-header text-center">
    Tickets:
  </h4>  
  <button>
      <a href="<%= flight._id %>/tickets/new">Add a Ticket</a>
    </button>
  <table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th>Seat</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody>
      <% tickets.forEach(function(ticket) { %>
        <tr>
          <td><%= ticket.seat %></td>
          <td><%= ticket.price %></td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>
  <%- include('../partials/footer') %>